import{Q as N}from"./QTooltip.f2d4a764.js";import{_ as $,k as T,aP as D,r as m,a as L,w as R,o as E,n as p,A as Q,q as l,u as t,D as i,j as o,y as d,x as C,p as G,K as J,bg as K,L as v,Q as f,ah as g,J as h}from"./index.32e23850.js";import{b as n}from"./QSelect.1c1fbcf0.js";import{b as V,Q as _}from"./QItem.842ffa8b.js";import{Q as b,a as w}from"./QPopupProxy.cf67ab7b.js";import{Q as M}from"./QPage.73906722.js";import{C as y}from"./ClosePopup.62cdd944.js";import{u as O}from"./useClientes.6d1579ec.js";import{u as z}from"./useUsers.57a4c951.js";import{u as H}from"./useServicios.176ad516.js";import{u as W}from"./use-quasar.20dc04b9.js";import"./position-engine.ca5b71d8.js";import"./format.a0c35f62.js";const X=T({name:"productosPage",setup(){O();const e=z(),s=H();W(),D();const{AppActiveUser:r}=e,{staff:q,getStaff:P,getService:U,generarOT:a,servicesList:we,productos:k,getProductos:S,getServices:ye}=s,u=m(!1),F=m(!1),j=m([{label:"Ambiente laboral",value:1},{label:"Fuentes fijas",value:2}]),I=L(async()=>r.value.permissions);return R(I,async c=>{const A=await c;u.value=A.find(B=>B==="agregar_producto")}),E(async()=>{r.value.permissions&&(u.value=r.value.permissions.find(c=>c==="agregar_producto")),await S()}),{agregar_producto:u,Categoria:j,addProduct:F,productos:k}}}),Y={class:"row q-pa-sm"},Z={class:"col-md-12"},x={key:0,class:"row q-mt-lg q-pa-sm"},ee={class:"col-xs-12"},oe=t("div",{class:"row"},[t("span",{class:"text-h5"}," Generar nueva orden de servicio ")],-1),se={class:"row"},le={class:"col-md-3 col-xs-12 q-pa-sm"},ae={class:"col-md-3 col-xs-12 q-pa-sm"},te={class:"col-md-3 col-xs-12 q-pa-sm"},ie={class:"col-md-3 col-xs-12 q-pa-sm"},re={class:"col-md-3 q-pa-sm"},de={class:"row"},ne={class:"col-md-4 col-xs-12 q-pa-sm"},ue={class:"row items-center justify-end"},ce={class:"col-md-4 col-xs-12 q-pa-sm"},me={class:"row items-center justify-end"},pe={class:"col-md-4 col-xs-12 q-pa-sm"},ve={class:"row items-center justify-end"},fe={class:"row justify-end q-mr-sm"},ge={class:"row q-mt-lg"},Ve={class:"col-xs-12"},_e={class:"q-pa-sm"};function be(e,s,r,q,P,U){return p(),Q(M,{class:"q-pa-sm"},{default:l(()=>[t("div",Y,[t("div",Z,[e.agregar_producto?(p(),Q(i,{key:0,onClick:s[0]||(s[0]=a=>e.addProduct=!e.addProduct),color:"primary",glossy:"","text-color":"white",icon:"add_task"},{default:l(()=>[o(N,{anchor:"center right",self:"center left",offset:[10,10]},{default:l(()=>[d(" Nuevo producto ")]),_:1})]),_:1})):C("",!0)])]),e.addProduct?(p(),G("div",x,[t("div",ee,[o(h,{rounded:""},{default:l(()=>[o(J,null,{default:l(()=>[oe,t("div",se,[t("div",le,[o(n,{options:e.productos,"option-label":"producto",modelValue:e.service.producto,"onUpdate:modelValue":s[1]||(s[1]=a=>e.service.producto=a),label:"Producto","emit-value":"",rules:[a=>!!a||"* Campo obligatorio"]},null,8,["options","modelValue","rules"])]),t("div",ae,[o(n,{modelValue:e.service.client,"onUpdate:modelValue":s[2]||(s[2]=a=>e.service.client=a),"model-value":e.service.client,"hide-selected":"","fill-input":"","use-input":"","input-debounce":"0",options:e.clientes,"option-label":"legalname",onFilter:e.filterFn,"emit-value":"",label:"Cliente"},{"no-option":l(()=>[o(V,null,{default:l(()=>[o(_,{class:"text-grey"},{default:l(()=>[d(" Sin resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","model-value","options","onFilter"])]),t("div",te,[o(n,{modelValue:e.service.planta,"onUpdate:modelValue":s[3]||(s[3]=a=>e.service.planta=a),"model-value":e.service.planta,"hide-selected":"","fill-input":"","use-input":"","input-debounce":"0",options:e.plantas,"option-label":"alias",onFilter:e.filterPlanta,"emit-value":"",label:"Planta"},{"no-option":l(()=>[o(V,null,{default:l(()=>[o(_,{class:"text-grey"},{default:l(()=>[d(" Sin resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","model-value","options","onFilter"])]),t("div",ie,[o(n,{modelValue:e.service.owner,"onUpdate:modelValue":s[4]||(s[4]=a=>e.service.owner=a),"model-value":e.service.owner,"hide-selected":"","fill-input":"","use-input":"","input-debounce":"0",options:e.owners,"option-label":"label",onFilter:e.filterStaff,label:"Responsable"},{"no-option":l(()=>[o(V,null,{default:l(()=>[o(_,{class:"text-grey"},{default:l(()=>[d(" Sin resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","model-value","options","onFilter"])]),t("div",re,[o(K,{label:"Acepta reconocimiento",modelValue:e.service.recognition,"onUpdate:modelValue":s[5]||(s[5]=a=>e.service.recognition=a)},null,8,["modelValue"])])]),t("div",de,[t("div",ne,[o(v,{filled:"",modelValue:e.service.date_recognition,"onUpdate:modelValue":s[7]||(s[7]=a=>e.service.date_recognition=a),mask:"date",label:"Inicio de reconocimiento",readonly:!e.service.recognition},{append:l(()=>[o(f,{name:"event",class:"cursor-pointer"},{default:l(()=>[o(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(w,{modelValue:e.service.date_recognition,"onUpdate:modelValue":s[6]||(s[6]=a=>e.service.date_recognition=a),readonly:!e.service.recognition},{default:l(()=>[t("div",ue,[g(o(i,{label:"Close",color:"primary",flat:""},null,512),[[y]])])]),_:1},8,["modelValue","readonly"])]),_:1})]),_:1})]),_:1},8,["modelValue","readonly"])]),t("div",ce,[o(v,{filled:"",modelValue:e.service.date_start,"onUpdate:modelValue":s[9]||(s[9]=a=>e.service.date_start=a),mask:"date",rules:["date"],label:"Inicio de ejecuci\xF3n"},{append:l(()=>[o(f,{name:"event",class:"cursor-pointer"},{default:l(()=>[o(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(w,{modelValue:e.service.date_start,"onUpdate:modelValue":s[8]||(s[8]=a=>e.service.date_start=a)},{default:l(()=>[t("div",me,[g(o(i,{label:"Close",color:"primary",flat:""},null,512),[[y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",pe,[o(v,{filled:"",modelValue:e.service.date_end,"onUpdate:modelValue":s[11]||(s[11]=a=>e.service.date_end=a),mask:"date",rules:["date"],label:"Fin de ejecuci\xF3n"},{append:l(()=>[o(f,{name:"event",class:"cursor-pointer"},{default:l(()=>[o(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(w,{modelValue:e.service.date_end,"onUpdate:modelValue":s[10]||(s[10]=a=>e.service.date_end=a)},{default:l(()=>[t("div",ve,[g(o(i,{label:"Close",color:"primary",flat:""},null,512),[[y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),t("div",fe,[o(i,{label:"guardar",color:"primary",onClick:e.saveService},null,8,["onClick"])])]),_:1})]),_:1})])])):C("",!0),t("div",ge,[t("div",Ve,[t("div",_e,[o(h,{rounded:""})])])])]),_:1})}var Ne=$(X,[["render",be]]);export{Ne as default};
