import{Q as B}from"./QTooltip.f2d4a764.js";import{_ as R,k as S,aP as T,r as i,a as A,w as E,o as I,n as p,A as b,q as r,u as l,D as f,j as s,y as h,x as y,p as P,K as D,L as w,J as _,Q as L,z as j}from"./index.32e23850.js";import{Q as z}from"./QSelect.1c1fbcf0.js";import{Q as G,a as H}from"./QTable.a082a620.js";import{Q as J}from"./QPage.73906722.js";import{u as K}from"./useUsers.57a4c951.js";import{u as M}from"./use-quasar.20dc04b9.js";import"./position-engine.ca5b71d8.js";import"./QItem.842ffa8b.js";import"./format.a0c35f62.js";import"./QList.6cb04e67.js";import"./QMarkupTable.b9a710fd.js";const F=S({name:"usuariosPage",setup(){const e=K(),a=M(),g=T(),{AppActiveUser:n,createUser:v,fetchUsers:U,users:o}=e,d=i(!1),c=i(!1),u=i({}),Q=i(""),k=i([{name:"id",label:"Id",field:"id",align:"center"},{name:"name",label:"Nombre",field:"name",align:"center"},{name:"email",label:"Email",field:"email",align:"center"},{name:"role",label:"Role",field:"role",align:"center"},{name:"active",label:"Status",field:"active",align:"center"}]),C=A(async()=>await n.value.permissions);E(C,async t=>{const m=await t;d.value=m.find($=>$==="agregar_usuario")});const N=()=>{c.value=!c.value,u.value={}},q=async()=>{(await v(u.value)).msg==="success"?(a.notify({position:"top",type:"positive",message:"Se cre\xF3 el usuario con \xE9xito"}),u.value={}):a.notify({position:"top",type:"negative",message:"Hubo un problema contacta al administrador"})},V=(t,m)=>{g.push({name:"editar-usuario",params:{id:m.id}})};return I(async()=>{n.value.permissions&&(d.value=n.value.permissions.find(t=>t==="agregar_usuario")),await U()}),{agregar_usuario:d,showNewUser:c,newUser:u,users:o,columns:k,filter:Q,cancelNewuSER:N,addNewUser:q,goToUser:V}}}),O={class:"row q-pa-sm"},W={class:"col-md-12"},X={key:0,class:"row"},Y={class:"col-xs-12"},Z={class:"q-mt-lg q-pa-sm"},x={class:"q-gutter-md"},ee={class:"row q-mt-lg"},se={class:"col-xs-12"},ae={class:"q-pa-sm"};function oe(e,a,g,n,v,U){return p(),b(J,{class:"q-pa-sm"},{default:r(()=>[l("div",O,[l("div",W,[e.agregar_usuario?(p(),b(f,{key:0,onClick:a[0]||(a[0]=o=>e.showNewUser=!e.showNewUser),color:"primary",glossy:"","text-color":"white",icon:"person"},{default:r(()=>[s(B,{anchor:"center right",self:"center left",offset:[10,10]},{default:r(()=>[h(" Agregar usuario ")]),_:1})]),_:1})):y("",!0)])]),e.showNewUser?(p(),P("div",X,[l("div",Y,[l("div",Z,[l("div",x,[s(_,{rounded:""},{default:r(()=>[s(D,{style:{"max-width":"400px"}},{default:r(()=>[s(w,{class:"q-ma-sm",modelValue:e.newUser.nombre,"onUpdate:modelValue":a[1]||(a[1]=o=>e.newUser.nombre=o),filled:"",label:"Nombre"},null,8,["modelValue"]),s(w,{class:"q-ma-sm",modelValue:e.newUser.email,"onUpdate:modelValue":a[2]||(a[2]=o=>e.newUser.email=o),filled:"",label:"Email"},null,8,["modelValue"]),s(f,{onClick:e.cancelNewuSER,class:"q-ma-sm",color:"dark",label:"Cancelar"},null,8,["onClick"]),s(f,{onClick:e.addNewUser,color:"primary",label:"Guardar"},null,8,["onClick"])]),_:1})]),_:1})])])])])):y("",!0),l("div",ee,[l("div",se,[l("div",ae,[s(_,{rounded:""},{default:r(()=>[s(G,{title:"Usuarios",rows:e.users,columns:e.columns,filter:e.filter,"row-key":"id",onRowClick:e.goToUser},{"top-right":r(()=>[s(w,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[3]||(a[3]=o=>e.filter=o),placeholder:"Buscar"},{append:r(()=>[s(L,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-active":r(o=>[s(H,{props:o,class:"text-center"},{default:r(()=>[s(z,{outline:"",square:"",color:"primary","text-color":"white",class:"text-center"},{default:r(()=>[h(j(o.row.active==1?"Activo":"Inactivo"),1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","onRowClick"])]),_:1})])])])]),_:1})}var ge=R(F,[["render",oe]]);export{ge as default};
