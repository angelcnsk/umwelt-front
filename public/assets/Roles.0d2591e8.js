import{_ as $,k as B,aP as C,r,a as U,w as A,o as R,n as i,A as T,q as e,u as c,j as o,L as V,Q as q,p,v as P,F as D,D as z,J as F,z as I}from"./index.32e23850.js";import{Q as L}from"./QTooltip.f2d4a764.js";import{Q as N}from"./QSelect.1c1fbcf0.js";import{Q as j,a as d}from"./QTable.a082a620.js";import{Q as x}from"./QPage.73906722.js";import{u as E}from"./useUsers.57a4c951.js";import{u as J}from"./usePermisos.08042042.js";import{u as M}from"./use-quasar.20dc04b9.js";import"./position-engine.ca5b71d8.js";import"./QItem.842ffa8b.js";import"./format.a0c35f62.js";import"./QList.6cb04e67.js";import"./QMarkupTable.b9a710fd.js";const S=B({name:"rolesPage",setup(){const a=E(),t=J();M();const u=C(),{AppActiveUser:m,createUser:f,fetchUsers:g,users:s}=a,{roles:l,getRoles:_}=t,Q=r(!1);r(!1),r({});const w=r(""),b=r([{name:"role",label:"Role",field:"role",align:"center"},{name:"description",label:"Descripci\xF3n",field:"description",align:"center"},{name:"usuarios",label:"Usuarios",field:"total_usuarios",align:"center"},{name:"acciones",label:"Acciones",align:"center"}]),h=U(async()=>await m.value.permissions);A(h,async n=>{const y=await n;Q.value=y.find(k=>k==="agregar_usuario")});const v=n=>{u.push({name:"assign",params:{id:n.id}})};return R(async()=>{await _()}),{columns:b,filter:w,roles:l,goTo:v}}}),G={class:"row q-mt-lg"},H={class:"col-xs-12"},K={class:"q-pa-sm"};function O(a,t,u,m,f,g){return i(),T(x,{class:"q-pa-sm"},{default:e(()=>[c("div",G,[c("div",H,[c("div",K,[o(F,{rounded:""},{default:e(()=>[o(j,{title:"Roles",rows:a.roles,columns:a.columns,filter:a.filter,"row-key":"id"},{"top-right":e(()=>[o(V,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":t[0]||(t[0]=s=>a.filter=s),placeholder:"Buscar"},{append:e(()=>[o(q,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-usuarios":e(s=>[o(d,{props:s,class:"text-center"},{default:e(()=>[o(N,{outline:"",label:s.row.total_usuarios,color:"primary",size:"md",class:"cursor-pointer"},{default:e(()=>[o(L,{self:"top start",offset:[100,10]},{default:e(()=>[(i(!0),p(D,null,P(s.row.usuarios,l=>(i(),p("p",null,I(l.name),1))),256))]),_:2},1024)]),_:2},1032,["label"])]),_:2},1032,["props"])]),"body-cell-acciones":e(s=>[o(d,{props:s,class:"text-center"},{default:e(()=>[o(z,{label:"Asignar",color:"primary",outline:"",onClick:l=>a.goTo(s.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1})])])])]),_:1})}var ce=$(S,[["render",O]]);export{ce as default};
