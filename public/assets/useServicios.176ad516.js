import{bk as U,bl as i,aa as V}from"./index.32e23850.js";const W=U("servicios",{state:()=>({productos:[],nuevoServicio:{productos:{categoria_norma:""}},servicesList:[],serviceItem:{},staff:[],recognitions:[],recognitionItem:{},departmentsList:[],tableA1:[],signatoryList:[],areas:[],editArea:!0,addStaff:!0,sin_asignar:[],asignados:[],archivos:[],secciones:[],dispositivos:[],usuariosDevice:[]}),actions:{nuevoProducto(e){const s="spa/crearProducto",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getProductos(){const e="spa/getProductos",s={};return new Promise((o,r)=>{i.get(e,s).then(a=>{this.productos=a.data,o()}).catch(a=>{r(a)})})},getTableA1(e){const s="spa/getTableA1",o={params:{id:e}};return new Promise((r,a)=>{i.get(s,o).then(t=>{typeof e=="undefined"&&(this.tableA1=t.data),r()}).catch(t=>{a(t)})})},newService(e){const s="spa/crearServicio",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getServices(){const e="spa/getServices",s={};return new Promise((o,r)=>{i.get(e,s).then(a=>{this.servicesList=a.data.services,o()}).catch(a=>{r(a)})})},getService(e){const s="spa/getService",o={params:{servicio_id:e}};return new Promise((r,a)=>{i.get(s,o).then(t=>{this.serviceItem=t.data.dataService,this.serviceItem.requester_avatar=t.data.dataService.requester_avatar==null?"/assets/avatar-s-11.png":this.serviceItem.requester_avatar,this.serviceItem.owner_avatar=t.data.dataService.owner_avatar===null?"/assets/avatar-s-11.png":this.serviceItem.owner_avatar,r()}).catch(t=>{a(t)})})},generarOT(e){const s="spa/editService",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},closeServiceStatus(e){const s="spa/editService",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},async saveDptoDB(e){const s="spa/editService",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getStaff(e){const s="spa/getStaff",o={params:e};return new Promise((r,a)=>{i.get(s,o).then(t=>{const n=t.data.staff;n.forEach(c=>{c.avatar===null||c.avatar,c.select=!1}),this.staff=n,r()}).catch(t=>{a(t)})})},async selectStaff(e){e.type="select";const s=state.staff[e.index],r={user:{avatar:s.avatar,email:s.email,id:s.id,name:s.name,select:s.select},service_id:e.service_id,dt:new Date},a="spa/setStaff",t={};return new Promise((n,c)=>{i.post(a,r,t).then(p=>{n(p)}).catch(p=>{c(p)})})},getFieldSheets(e){const s="spa/getFieldSheets",o={params:{service_id:e}};return new Promise((r,a)=>{i.get(s,o).then(t=>{r(t)}).catch(t=>{a(t)})})},async saveSectionFile(e){try{const s="spa/saveReportFile",o=new FormData;o.append("service_id",e.service_id),o.append("report_part_id",e.seccion_id),o.append("archivos",e.files);const r={};return new Promise((a,t)=>{i.post(s,o,r).then(n=>{a(n)}).catch(n=>{t(n)})})}catch(s){console.log("error guardar archivo",s)}},getSectionFile(e){const s="spa/findReportFile",o={params:e};return new Promise((r,a)=>{i.get(s,o).then(t=>{this.archivos=t.data.archivos,this.secciones=t.data.secciones,r()}).catch(t=>{a(t)})})},getRecognitions(e){const s="spa/getReconocimientos",o={params:{recognition_id:e}};return new Promise((r,a)=>{i.get(s,o).then(t=>{e!==void 0?commit("SET_RECOGNITION_DATA",t.data):commit("SET_RECOGNITIONS",t.data),r(t)}).catch(t=>{a(t)})})},saveRecognition(e){const s="spa/saveReconocimiento",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},saveCaratulaPayload(e){const s="spa/editService",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getDepartments(e){const s="spa/getDepartments",o={params:e};return new Promise((r,a)=>{i.get(s,o).then(t=>{this.asignados=[],this.departmentsList=t.data.dptos,this.usuariosDevice=t.data.dispositivo_usuarios,t.data.areas&&(t.data.areas.map(n=>{n.payload!=null&&(n.payload=JSON.parse(n.payload),n.payload.areas_iluminadas.map(c=>{c.cambiarNombre=!1})),n.puntos.length>0&&n.puntos.forEach(c=>{c.user_id!=null&&this.asignados.push(c)})}),this.areas=t.data.areas),r()}).catch(t=>{a(t)})})},async saveAreaPayload(e){const s="spa/createArea",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getReport(e){const s="spa/getreport",o={params:{servicio_id:e}};return new Promise((r,a)=>{i.get(s,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getPdfFieldSheets(e){const s="spa/gethojascampo",o={params:{servicio_id:e,responseType:"blob"}};return new Promise((r,a)=>{i.get(s,o).then(t=>{r(t)}).catch(t=>{a(t)})})},getSignatoryList(e){const s="spa/signatoryList",o={};return new Promise((r,a)=>{i.get(s,o).then(t=>{this.signatoryList=t.data,r()}).catch(t=>{a(t)})})},saveSignatory(e){const s="spa/editService",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t)}).catch(t=>{a(t)})})},removeFile(e){const s="spa/removeFile",o={};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{r(t.data)}).catch(t=>{a(t)})})},managePoints(e){const s="spa/managePoints",o={params:e};return new Promise((r,a)=>{i.post(s,e,o).then(t=>{t.data.action=="get"&&(this.sin_asignar=t.data.puntos.filter(n=>{if(n.user_id==null)return n})),r(t)}).catch(t=>{a(t)})})},getDevices(e){const s="spa/getDevices",o={params:e};return new Promise((r,a)=>{i.get(s,o).then(t=>{this.dispositivos=t.data,r()}).catch(t=>{a(t)})})}}}),Y=()=>{const e=W(),{nuevoProducto:s,getProductos:o,getTableA1:r,newService:a,getServices:t,getService:n,generarOT:c,closeServiceStatus:p,saveDptoDB:u,getStaff:d,selectStaff:v,getFieldSheets:h,saveSectionFile:g,getSectionFile:l,getRecognitions:m,saveRecognition:S,saveCaratulaPayload:f,getDepartments:P,saveAreaPayload:w,getReport:_,getPdfFieldSheets:D,getSignatoryList:y,saveSignatory:F,removeFile:A,managePoints:I,getDevices:R}=e,{productos:b,nuevoServicio:L,servicesList:T,serviceItem:O,staff:E,recognitions:N,recognitionItem:q,departmentsList:C,tableA1:x,signatoryList:B,areas:G,editArea:j,addStaff:k,sin_asignar:J,asignados:z,archivos:H,secciones:K,dispositivos:M,usuariosDevice:Q}=V(e);return{productos:b,nuevoServicio:L,servicesList:T,serviceItem:O,staff:E,recognitions:N,recognitionItem:q,departmentsList:C,tableA1:x,signatoryList:B,areas:G,editArea:j,addStaff:k,sin_asignar:J,asignados:z,secciones:K,archivos:H,dispositivos:M,usuariosDevice:Q,nuevoProducto:s,getProductos:o,getTableA1:r,newService:a,getServices:t,getService:n,generarOT:c,closeServiceStatus:p,saveDptoDB:u,getStaff:d,selectStaff:v,getFieldSheets:h,saveSectionFile:g,getSectionFile:l,getRecognitions:m,saveRecognition:S,saveCaratulaPayload:f,getDepartments:P,saveAreaPayload:w,getReport:_,getPdfFieldSheets:D,getSignatoryList:y,saveSignatory:F,removeFile:A,managePoints:I,getDevices:R}};export{Y as u};
